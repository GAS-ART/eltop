function w(i){const t=document.getElementById(i),n=document.getElementById("body"),r=t.querySelector(".close-popup"),s=t.querySelector(".popup__button"),e=t.querySelector(".popup__loading"),a=t.querySelector(".preview-file")||!1,L=t.querySelectorAll("input");t.classList.add("open"),n.classList.add("lock"),r.addEventListener("click",function(l){m(t),l.preventDefault()}),s.addEventListener("click",function(){m(t)});function m(l){l.classList.remove("open"),n.classList.remove("lock"),t.classList.remove("sent"),L.forEach(c=>{c.value||(c.previousElementSibling.classList.remove("error"),c.classList.remove("error"),c.nextElementSibling.classList.remove("error"),c.nextElementSibling.innerHTML="")}),a&&(a.innerHTML="")}t.addEventListener("mousedown",function(l){!l.target.closest(".popup__body")&&!e.classList.contains("active")&&m(t)})}const A=document.querySelectorAll(".link-on-popup");A.forEach(i=>{i.addEventListener("click",t=>{w(t.target.dataset.popupId)})});const B=document.querySelectorAll(".language-btn");B.forEach(i=>{i.addEventListener("click",function(t){window.matchMedia("(pointer: coarse)").matches&&(i.classList.contains("active")||t.preventDefault(),i.classList.toggle("active"))})});const I=document.querySelectorAll("form"),p={name:['Не заполнено поле "ВАШЕ ИМЯ"',`Не заповнено поле "ВАШЕ ІМ'Я"`,'Поле "ИМЯ" должно иметь 2 или больше символов',`Поле "ІМ'Я" повинно мати 2 або більше символів`,'Поле "ИМЯ" должно иметь не больше 80 символов',`Поле "ІМ'Я" повинно мати не більше 80 символів`,'Поле "ИМЯ" не может содержать цифры',`Поле "ІМ'Я" не може містити цифри`],phone:["Не верный формат номера телефона","Невірний формат номеру телефона",'Не заполнено поле "Номер телефона"','Не заповнено поле "Номер телефону"'],text:['Вы ввели слишком много символов в поле "Сообщение"','Ви ввели занадто багато символів у полі "Повідомлення"']};I.forEach(i=>{i.addEventListener("submit",async t=>{var l,c,b,f,x,h,y,q,T,k,_;t.preventDefault();const n=i.querySelector('input[name="_token"]').value,r=i.querySelector(".error-name"),s=i.querySelector(".error-phone"),e=i.querySelector(".error-text"),a=i.closest(".popup__row").previousElementSibling.previousElementSibling;a.classList.add("active");const L=new FormData(i),m="https://eltop.artgas.pro/send-main-form";try{const v=await fetch(m,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":n},method:"post",body:L,credentials:"same-origin"});if(v.ok)a.classList.remove("active"),i.closest(".popup").classList.add("sent"),r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error"),s.innerText="",s.classList.remove("error"),s.previousElementSibling.classList.remove("error"),s.previousElementSibling.previousElementSibling.classList.remove("error"),e&&(e.innerText="",e.classList.remove("error"),e.previousElementSibling.classList.remove("error"),e.previousElementSibling.previousElementSibling.classList.remove("error")),i.reset();else{const o=await v.json();a.classList.remove("active"),i.classList.contains("ru")?((l=o.errors)!=null&&l.name?(r.innerText=(c=o.errors)==null?void 0:c.name[0],r.classList.add("error"),r.previousElementSibling.classList.add("error"),r.previousElementSibling.previousElementSibling.classList.add("error"),console.log(r.previousElementSibling)):(r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error")),(b=o.errors)!=null&&b.phone?(s.innerText=(f=o.errors)==null?void 0:f.phone[0],s.classList.add("error"),s.previousElementSibling.classList.add("error"),s.previousElementSibling.previousElementSibling.classList.add("error")):(s.innerText="",s.classList.remove("error"),s.previousElementSibling.classList.remove("error"),s.previousElementSibling.previousElementSibling.classList.remove("error")),(x=o.errors)!=null&&x.text?(e.innerText=(h=o.errors)==null?void 0:h.text[0],e.classList.add("error"),e.previousElementSibling.classList.add("error"),e.previousElementSibling.previousElementSibling.classList.add("error")):!((y=o.errors)!=null&&y.text)&&e&&(e.innerText="",e.classList.remove("error"),e.previousElementSibling.classList.remove("error"),e.previousElementSibling.previousElementSibling.classList.remove("error"))):((q=o.errors)!=null&&q.name?(r.innerText=p.name[p.name.findIndex(u=>u==o.errors.name[0])+1],r.classList.add("error"),r.previousElementSibling.classList.add("error"),r.previousElementSibling.previousElementSibling.classList.add("error")):(r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error")),(T=o.errors)!=null&&T.phone?(s.innerText=p.phone[p.phone.findIndex(u=>u==o.errors.phone[0])+1],s.classList.add("error"),s.previousElementSibling.classList.add("error"),s.previousElementSibling.previousElementSibling.classList.add("error")):(s.innerText="",s.classList.remove("error"),s.previousElementSibling.classList.remove("error"),s.previousElementSibling.previousElementSibling.classList.remove("error")),(k=o.errors)!=null&&k.text?(e.innerText=p.text[p.text.findIndex(u=>u==o.errors.text[0])+1],e.classList.add("error"),e.previousElementSibling.classList.add("error"),e.previousElementSibling.previousElementSibling.classList.add("error")):!((_=o.errors)!=null&&_.text)&&e&&(e.innerText="",e.classList.remove("error"),e.previousElementSibling.classList.remove("error"),e.previousElementSibling.previousElementSibling.classList.remove("error")))}}catch(v){console.log(v)}})});window.matchMedia("(pointer: fine)").matches&&document.querySelectorAll(".header__contacts-contact").forEach(t=>{t.addEventListener("mouseenter",n=>{n.target.closest(".header__contacts-content").previousElementSibling.classList.add("active")}),t.addEventListener("mouseleave",n=>{n.target.closest(".header__contacts-content").previousElementSibling.classList.remove("active")})});const d=document.querySelector(".icon-menu"),g=document.querySelector(".burger"),E=document.querySelector(".burger-bg"),S=document.querySelector("body");d.addEventListener("click",function(){d.classList.toggle("open"),g.classList.toggle("open"),E.classList.toggle("open"),S.classList.toggle("lock")});window.onresize=()=>{d.classList.contains("open")&&d.classList.remove("open"),g.classList.contains("open")&&g.classList.remove("open"),E.classList.contains("open")&&E.classList.remove("open"),S.classList.contains("lock")&&S.classList.remove("lock")};
