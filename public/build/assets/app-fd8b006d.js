function h(o){const e=document.getElementById(o),s=document.getElementById("body"),t=e.querySelector(".close-popup"),a=e.querySelector(".popup__button"),v=e.querySelector(".popup__loading"),p=e.querySelector(".preview-file")||!1,m=e.querySelectorAll("input");e.classList.add("open"),s.classList.add("lock"),t.addEventListener("click",function(r){c(e),r.preventDefault()}),a.addEventListener("click",function(){c(e)});function c(r){r.classList.remove("open"),s.classList.remove("lock"),e.classList.remove("sent"),m.forEach(i=>{i.value||(i.previousElementSibling.classList.remove("error"),i.classList.remove("error"),i.nextElementSibling.classList.remove("error"),i.nextElementSibling.innerHTML="")}),p&&(p.innerHTML="")}e.addEventListener("mousedown",function(r){!r.target.closest(".popup__body")&&!v.classList.contains("active")&&c(e)})}const y=document.querySelectorAll(".link-on-popup");y.forEach(o=>{o.addEventListener("click",e=>{h(e.target.dataset.popupId)})});const k=document.querySelectorAll(".language-btn");k.forEach(o=>{o.addEventListener("click",function(e){window.matchMedia("(pointer: coarse)").matches&&(o.classList.contains("active")||e.preventDefault(),o.classList.toggle("active"))})});const n=document.getElementById("mainForm");if(n){const o=document.querySelector('input[name="_token"]').value,e={name:['Не заполнено поле "ВАШЕ ИМЯ"',`Не заповнено поле "ВАШЕ ІМ'Я"`,'Поле "ИМЯ" должно иметь 2 или больше символов',`Поле "ІМ'Я" повинно мати 2 або більше символів`,'Поле "ИМЯ" должно иметь не больше 80 символов',`Поле "ІМ'Я" повинно мати не більше 80 символів`,'Поле "ИМЯ" не может содержать цифры',`Поле "ІМ'Я" не може містити цифри`],phone:["Не верный формат номера телефона","Невірний формат номеру телефона",'Не заполнено поле "Номер телефона"','Не заповнено поле "Номер телефону"'],text:['Вы ввели слишком много символов в поле "Сообщение"','Ви ввели занадто багато символів у полі "Повідомлення"']},s=n.querySelector(".error-name"),t=n.querySelector(".error-phone"),a=n.closest(".popup__row").previousElementSibling.previousElementSibling;n.addEventListener("submit",async v=>{var m,c,r,i,b,f;v.preventDefault(),a.classList.add("active");const p=new FormData(n);try{const u=await fetch("https://eltop.artgas.pro/send-main-form",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":o},method:"post",body:p,credentials:"same-origin"});if(u.ok)console.log("SEND WORK!"),a.classList.remove("active"),n.closest(".popup").classList.add("sent"),s.innerText="",s.previousElementSibling.classList.remove("error"),s.previousElementSibling.previousElementSibling.classList.remove("error"),t.innerText="",t.previousElementSibling.classList.remove("error"),t.previousElementSibling.previousElementSibling.classList.remove("error"),n.reset();else{const l=await u.json();a.classList.remove("active"),n.classList.contains("ru")?((m=l.errors)!=null&&m.name?(s.innerText=(c=l.errors)==null?void 0:c.name[0],s.previousElementSibling.classList.add("error"),s.previousElementSibling.previousElementSibling.classList.add("error")):(s.innerText="",s.previousElementSibling.classList.remove("error"),s.previousElementSibling.previousElementSibling.classList.remove("error")),(r=l.errors)!=null&&r.phone?(t.innerText=(i=l.errors)==null?void 0:i.phone[0],t.previousElementSibling.classList.add("error"),t.previousElementSibling.previousElementSibling.classList.add("error")):(t.innerText="",t.previousElementSibling.classList.remove("error"),t.previousElementSibling.previousElementSibling.classList.remove("error"))):((b=l.errors)!=null&&b.name?(s.innerText=e.name[e.name.findIndex(g=>g==l.errors.name[0])+1],s.previousElementSibling.classList.add("error"),s.previousElementSibling.previousElementSibling.classList.add("error")):(s.innerText="",s.previousElementSibling.classList.remove("error"),s.previousElementSibling.previousElementSibling.classList.remove("error")),(f=l.errors)!=null&&f.phone?(t.innerText=e.phone[e.phone.findIndex(g=>g==l.errors.phone[0])+1],t.previousElementSibling.classList.add("error"),t.previousElementSibling.previousElementSibling.classList.add("error")):(t.innerText="",t.previousElementSibling.classList.remove("error"),t.previousElementSibling.previousElementSibling.classList.remove("error")))}}catch(u){console.log(u)}})}window.matchMedia("(pointer: fine)").matches&&document.querySelectorAll(".header__contacts-contact").forEach(e=>{e.addEventListener("mouseenter",s=>{s.target.closest(".header__contacts-content").previousElementSibling.classList.add("active")}),e.addEventListener("mouseleave",s=>{s.target.closest(".header__contacts-content").previousElementSibling.classList.remove("active")})});const d=document.querySelector(".icon-menu"),L=document.querySelector(".burger"),E=document.querySelector(".burger-bg"),S=document.querySelector("body");d.addEventListener("click",function(){d.classList.toggle("open"),L.classList.toggle("open"),E.classList.toggle("open"),S.classList.toggle("lock")});window.onresize=()=>{d.classList.contains("open")&&d.classList.remove("open"),L.classList.contains("open")&&L.classList.remove("open"),E.classList.contains("open")&&E.classList.remove("open"),S.classList.contains("lock")&&S.classList.remove("lock")};
