function w(s){const e=document.getElementById(s),n=document.getElementById("body"),t=e.querySelector(".close-popup"),i=e.querySelector(".popup__button"),r=e.querySelector(".popup__loading"),c=e.querySelector(".preview-file")||!1,g=e.querySelectorAll("input");e.classList.add("open"),n.classList.add("lock"),t.addEventListener("click",function(l){v(e),l.preventDefault()}),i.addEventListener("click",function(){v(e)});function v(l){l.classList.remove("open"),n.classList.remove("lock"),e.classList.remove("sent"),g.forEach(a=>{a.value||(a.previousElementSibling.classList.remove("error"),a.classList.remove("error"),a.nextElementSibling.classList.remove("error"),a.nextElementSibling.innerHTML="")}),c&&(c.innerHTML="")}e.addEventListener("mousedown",function(l){!l.target.closest(".popup__body")&&!r.classList.contains("active")&&v(e)})}const A=document.querySelectorAll(".link-on-popup");A.forEach(s=>{s.addEventListener("click",e=>{w(e.target.dataset.popupId)})});const B=document.querySelectorAll(".language-btn");B.forEach(s=>{s.addEventListener("click",function(e){window.matchMedia("(pointer: coarse)").matches&&(s.classList.contains("active")||e.preventDefault(),s.classList.toggle("active"))})});const I=document.querySelectorAll("form"),m={name:['Не заполнено поле "ВАШЕ ИМЯ"',`Не заповнено поле "ВАШЕ ІМ'Я"`,'Поле "ИМЯ" должно иметь 2 или больше символов',`Поле "ІМ'Я" повинно мати 2 або більше символів`,'Поле "ИМЯ" должно иметь не больше 80 символов',`Поле "ІМ'Я" повинно мати не більше 80 символів`,'Поле "ИМЯ" не может содержать цифры',`Поле "ІМ'Я" не може містити цифри`],phone:["Не верный формат номера телефона","Невірний формат номеру телефона",'Не заполнено поле "Номер телефона"','Не заповнено поле "Номер телефону"'],text:['Вы ввели слишком много символов в поле "Сообщение"','Ви ввели занадто багато символів у полі "Повідомлення"']};I.forEach(s=>{s.addEventListener("submit",async e=>{var l,a,b,f,h,x,y,q,T,_,k;e.preventDefault();const n=s.querySelector('input[name="_token"]').value,t=s.querySelector(".error-name"),i=s.querySelector(".error-phone"),r=s.querySelector(".error-text"),c=s.closest(".popup__row").previousElementSibling.previousElementSibling;c.classList.add("active");const g=new FormData(s),v="https://eltop.artgas.pro/send-main-form";try{const u=await fetch(v,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":n},method:"post",body:g,credentials:"same-origin"});if(u.ok)c.classList.remove("active"),s.closest(".popup").classList.add("sent"),t.innerText="",t.classList.remove("error"),t.previousElementSibling.classList.remove("error"),t.previousElementSibling.previousElementSibling.classList.remove("error"),i.innerText="",i.classList.remove("error"),i.previousElementSibling.classList.remove("error"),i.previousElementSibling.previousElementSibling.classList.remove("error"),r&&(r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error")),s.reset();else{const o=await u.json();c.classList.remove("active"),s.classList.contains("ru")?((l=o.errors)!=null&&l.name?(t.innerText=(a=o.errors)==null?void 0:a.name[0],t.classList.add("error"),t.previousElementSibling.classList.add("error"),t.previousElementSibling.previousElementSibling.classList.add("error"),console.log(t.previousElementSibling)):(t.innerText="",t.classList.remove("error"),t.previousElementSibling.classList.remove("error"),t.previousElementSibling.previousElementSibling.classList.remove("error")),(b=o.errors)!=null&&b.phone?(i.innerText=(f=o.errors)==null?void 0:f.phone[0],i.classList.add("error"),i.previousElementSibling.classList.add("error"),i.previousElementSibling.previousElementSibling.classList.add("error")):(i.innerText="",i.classList.remove("error"),i.previousElementSibling.classList.remove("error"),i.previousElementSibling.previousElementSibling.classList.remove("error")),(h=o.errors)!=null&&h.text?(r.innerText=(x=o.errors)==null?void 0:x.text[0],r.classList.add("error"),r.previousElementSibling.classList.add("error"),r.previousElementSibling.previousElementSibling.classList.add("error")):!((y=o.errors)!=null&&y.text)&&r&&(r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error"))):((q=o.errors)!=null&&q.name?(t.innerText=m.name[m.name.findIndex(p=>p==o.errors.name[0])+1],t.classList.add("error"),t.previousElementSibling.classList.add("error"),t.previousElementSibling.previousElementSibling.classList.add("error")):(t.innerText="",t.classList.remove("error"),t.previousElementSibling.classList.remove("error"),t.previousElementSibling.previousElementSibling.classList.remove("error")),(T=o.errors)!=null&&T.phone?(i.innerText=m.phone[m.phone.findIndex(p=>p==o.errors.phone[0])+1],i.classList.add("error"),i.previousElementSibling.classList.add("error"),i.previousElementSibling.previousElementSibling.classList.add("error")):(i.innerText="",i.classList.remove("error"),i.previousElementSibling.classList.remove("error"),i.previousElementSibling.previousElementSibling.classList.remove("error")),(_=o.errors)!=null&&_.text?(r.innerText=m.text[m.text.findIndex(p=>p==o.errors.text[0])+1],r.classList.add("error"),r.previousElementSibling.classList.add("error"),r.previousElementSibling.previousElementSibling.classList.add("error")):!((k=o.errors)!=null&&k.text)&&r&&(r.innerText="",r.classList.remove("error"),r.previousElementSibling.classList.remove("error"),r.previousElementSibling.previousElementSibling.classList.remove("error")))}}catch(u){console.log(u)}})});window.matchMedia("(pointer: fine)").matches&&document.querySelectorAll(".header__contacts-contact").forEach(e=>{e.addEventListener("mouseenter",n=>{n.target.closest(".header__contacts-content").previousElementSibling.classList.add("active")}),e.addEventListener("mouseleave",n=>{n.target.closest(".header__contacts-content").previousElementSibling.classList.remove("active")})});const d=document.querySelector(".icon-menu"),L=document.querySelector(".burger"),E=document.querySelector(".burger-bg"),S=document.querySelector("body");d.addEventListener("click",function(){d.classList.toggle("open"),L.classList.toggle("open"),E.classList.toggle("open"),S.classList.toggle("lock")});window.onresize=()=>{d.classList.contains("open")&&d.classList.remove("open"),L.classList.contains("open")&&L.classList.remove("open"),E.classList.contains("open")&&E.classList.remove("open"),S.classList.contains("lock")&&S.classList.remove("lock")};const M=document.querySelectorAll(".advantages__item h3"),C=document.querySelectorAll(".advantages__item p");M.forEach(s=>{s.addEventListener("mouseenter",e=>{e.target.previousElementSibling.classList.add("active")}),s.addEventListener("mouseleave",e=>{e.target.previousElementSibling.classList.remove("active")})});C.forEach(s=>{s.addEventListener("mouseenter",e=>{e.target.previousElementSibling.previousElementSibling.classList.add("active")}),s.addEventListener("mouseleave",e=>{e.target.previousElementSibling.previousElementSibling.classList.remove("active")})});
